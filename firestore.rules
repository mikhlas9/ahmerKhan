rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // Homepage collection - single document 'content'
    // Public can read, only authenticated admins can write
    match /homepage/{document} {
      allow read: if true; // Anyone can read homepage content
      allow write: if isAuthenticated(); // Only authenticated users can write
    }
    
    // Projects collection
    // Public can read all projects, only authenticated admins can create/update/delete
    match /projects/{projectId} {
      allow read: if true; // Anyone can read projects
      allow create, update, delete: if isAuthenticated(); // Only authenticated users can modify
    }
    
    // Tearsheets collection
    // Public can read all tearsheets, only authenticated admins can create/update/delete
    match /tearsheets/{tearsheetId} {
      allow read: if true; // Anyone can read tearsheets
      allow create, update, delete: if isAuthenticated(); // Only authenticated users can modify
    }
    
    // Awards collection
    // Public can read all awards, only authenticated admins can create/update/delete
    match /awards/{awardId} {
      allow read: if true; // Anyone can read awards
      allow create, update, delete: if isAuthenticated(); // Only authenticated users can modify
    }
    
    // Portraits collection
    // Public can read all portraits, only authenticated admins can create/update/delete
    match /portraits/{portraitId} {
      allow read: if true; // Anyone can read portraits
      allow create, update, delete: if isAuthenticated(); // Only authenticated users can modify
    }
    
    // Contact collection - single document 'mainContact'
    // Public can read, only authenticated admins can write
    match /contact/{document} {
      allow read: if true; // Anyone can read contact information
      allow write: if isAuthenticated(); // Only authenticated users can write
    }
    
    // Footer collection - single document 'content'
    // Public can read, only authenticated admins can write
    match /footer/{document} {
      allow read: if true; // Anyone can read footer content
      allow write: if isAuthenticated(); // Only authenticated users can write
    }
    
    // Deny all other collections by default
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

